!function e(n,t,r){function o(s,u){if(!t[s]){if(!n[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=t[s]={exports:{}};n[s][0].call(c.exports,function(e){var t=n[s][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){"use strict";function r(e){return function(n,t){return n&&"unknown_error"===n.name&&(n.message=(n.message||"")+" Unknown error!  Did you remember to enable CORS?"),e(n,t)}}function o(e){this.status=400,this.name="authentication_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,o)}catch(n){}}var i=e("./utils");t.signup=i.toPromise(function(e,n,t,s){var u=this,a=u.constructor,c=a.utils;if("undefined"==typeof s&&(s="undefined"==typeof t?"undefined"==typeof n?e:n:t,t={}),-1===["http","https"].indexOf(u.type()))return s(new o("this plugin only works for the http/https adapter"));if(!e)return s(new o("you must provide a username"));if(!n)return s(new o("you must provide a password"));var d="org.couchdb.user:"+e,f={name:e,password:n,roles:t.roles||[],type:"user",_id:d},p=["name","password","roles","type"];if(t.metadata){for(var l in t.metadata)if(t.hasOwnProperty(l)&&(-1!==p.indexOf(l)||l.startsWith("_")))return s(new o('cannot use reserved word in metadata: "'+l+'"'));f=c.extend(!0,f,t.metadata)}var w=i.getUsersUrl(u)+"/"+encodeURIComponent(d),h=c.extend(!0,{method:"PUT",url:w,body:f},t.ajax||{});c.ajax(h,r(s))}),t.signUp=t.signup,t.login=i.toPromise(function(e,n,t,s){var u=this,a=u.constructor,c=a.utils;if("undefined"==typeof s&&(s=t,t={}),-1===["http","https"].indexOf(u.type()))return s(new o("this plugin only works for the http/https adapter"));if(!e)return s(new o("you must provide a username"));if(!n)return s(new o("you must provide a password"));var d=c.extend(!0,{method:"POST",url:i.getSessionUrl(u),body:{name:e,password:n}},t.ajax||{});c.ajax(d,r(s))}),t.logIn=t.login,t.logout=i.toPromise(function(e,n){var t=this,o=t.constructor,s=o.utils;"undefined"==typeof n&&(n=e,e={});var u=s.extend(!0,{method:"DELETE",url:i.getSessionUrl(t)},e.ajax||{});s.ajax(u,r(n))}),t.logOut=t.logout,t.getSession=i.toPromise(function(e,n){var t=this,o=t.constructor,s=o.utils;"undefined"==typeof n&&(n=e,e={});var u=i.getSessionUrl(t),a=s.extend(!0,{method:"GET",url:u},e.ajax||{});s.ajax(a,r(n))}),t.getUser=i.toPromise(function(e,n,t){var s=this,u=s.constructor,a=u.utils;if("undefined"==typeof t&&(t="undefined"==typeof n?e:n,n={}),!e)return t(new o("you must provide a username"));var c=i.getUsersUrl(s),d=a.extend(!0,{method:"GET",url:c+"/"+encodeURIComponent("org.couchdb.user:"+e)},n.ajax||{});a.ajax(d,r(t))}),i.inherits(o,Error),"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(t)},{"./utils":5}],2:[function(){},{}],3:[function(e,n){function t(){}var r=n.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(n){var t=[];return window.addEventListener("message",function(e){var n=e.source;if((n===window||null===n)&&"process-tick"===e.data&&(e.stopPropagation(),t.length>0)){var r=t.shift();r()}},!0),function(e){t.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=t,r.once=t,r.off=t,r.emit=t,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(e,n){n.exports="function"==typeof Object.create?function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,n){e.super_=n;var t=function(){};t.prototype=n.prototype,e.prototype=new t,e.prototype.constructor=e}},{}],5:[function(e,n,t){(function(n,r){"use strict";function o(e){return e.getUrl().replace(/\/[^\/]+\/?$/,"")}var i;i="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof r.Promise?r.Promise:e("lie"),t.getUsersUrl=function(e){return o(e)+"/_users"},t.getSessionUrl=function(e){return o(e)+"/_session"},t.once=function(e){var n=!1;return t.getArguments(function(t){if(n)throw console.trace(),new Error("once called  more than once");n=!0,e.apply(this,t)})},t.getArguments=function(e){return function(){for(var n=arguments.length,t=new Array(n),r=-1;++r<n;)t[r]=arguments[r];return e.call(this,t)}},t.toPromise=function(e){return t.getArguments(function(r){var o,s=this,u="function"==typeof r[r.length-1]?r.pop():!1;u&&(o=function(e,t){n.nextTick(function(){u(e,t)})});var a=new i(function(n,o){try{var i=t.once(function(e,t){e?o(e):n(t)});r.push(i),e.apply(s,r)}catch(u){o(u)}});return o&&a.then(function(e){o(null,e)},o),a.cancel=function(){return this},a})},t.inherits=e("inherits")}).call(this,e("/Users/nolanlawson/workspace/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/nolanlawson/workspace/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":3,inherits:4,lie:2}]},{},[1]);